<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{{ title }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  </head>
  <body>
    <h1>{{ title }}</h1>
    <p class="muted">
  Generated: {{ generated_at }}{% if tz_name %} — Timezone: {{ tz_name }}{% endif %}
</p>

{% if dst_note %}
<div class="dst-note" style="margin-top:12px; padding:10px; background:#fff3cd; border:1px solid #ffeeba; border-radius:8px; color:#856404;">
  ⏰ <strong>Note:</strong> This report includes shifts crossing a DST change in <em>{{ tz_name }}</em>. The elapsed time was adjusted automatically.
</div>
{% endif %}

    <table class="report">
      <thead>
        <tr>
          <th class="col-date">Date</th>
          <th class="col-day">Day</th>
          <th class="col-time">Time Worked</th>
          <th class="col-hours num">Hours</th>
          <th class="col-min num">Minutes</th>
        </tr>
      </thead>
      <tbody>
        {% for r in rows %}
        <tr>
          <td class="col-date">{{ r.date }}</td>
          <td class="col-day">{{ r.day }}</td>
          <td class="col-time"><span class="time">{{ r.time_label }}</span></td>
          <td class="col-hours num">{{ r.h }}</td>
          <td class="col-min num">{{ r.m }}</td>
        </tr>
        {% endfor %}
      </tbody>

      <tfoot>
        <tr class="subtotal">
          <td colspan="3" class="label">Subtotal</td>
          <td class="num"><strong>{{ subtotal_h }} h</strong></td>
          <td class="num">
            <strong>{{ subtotal_m }} min = {{ subtotal_m_as_h }} h {{ "%02d"|format(subtotal_m_rem) }} min</strong>
          </td>
        </tr>
        <tr class="total">
          <td colspan="3" class="label">Total</td>
          <td class="num"><strong>{{ total_h }} h {{ total_m }} min</strong></td>
          <td></td>
        </tr>
      </tfoot>
    </table>

    <div class="actions noprint">
      <a class="btn" href="{{ url_for('index') }}" rel="noopener">&larr; Back</a>
      <a class="btn" href="{{ url_for('index') }}" id="editBtn" rel="noopener">Edit Report</a>
      <button id="printBtn" class="btn">Print / Save PDF</button>

      <div id="iabNotice" class="iab-notice noprint" hidden>
        Printing isn’t available inside in-app browsers. Tap <strong>Open in Browser</strong> and then print.
        <div class="iab-actions">
          <a id="openInBrowser" class="btn" href="#" rel="external noopener">Open in Browser</a>
          <button id="copyLink" class="btn" type="button">Copy link</button>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='main.js') }}?v=9" defer></script>
  </body>
</html>